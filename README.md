# Техническое задание ya.rasp-telebot

## Оглавление
* [Введение](#ВВЕДЕНИЕ)
  * [Назначение](#НАЗНАЧЕНИЕ)
  * [Масштаб проекта](#МАСШТАБ-ПРОЕКТА)
  * [Целевая аудитория](#МАСШТАБ-ПРОЕКТА)
* [Общее описание](#ОБЩЕЕ-ОПИСАНИЕ)
  * [Описание](#ОПИСАНИЕ)
  * [Общая Функциональность](#ОБЩАЯ-ФУНКЦИОНАЛЬНОСТЬ)
    * [С точки зрения разработчиков](#С-ТОЧКИ-ЗРЕНИЯ-РАЗРАБОТЧИКОВ)
    * [С точки зрения организации Telegram](#С-ТОЧКИ-ЗРЕНИЯ-ОРГАНИЗАЦИИ-TELEGRAM)
    * [С точки зрения организации Яндекс](#С-ТОЧКИ-ЗРЕНИЯ-ОРГАНИЗАЦИИ-ЯНДЕКС)
    * [С точки зрения клиента](#С-ТОЧКИ-ЗРЕНИЯ-КЛИЕНТА)
  * [Функции продукта](#ФУНКЦИИ-ПРОДУКТА)
  * [Характеристики пользователя](#ХАРАКТЕРИСТИКИ-ПОЛЬЗОВАТЕЛЯ)
  * [Ограничения](#ОГРАНИЧЕНИЯ)
* [Детальные требования](#ДЕТАЛЬНЫЕ-ТРЕБОВАНИЯ)
  * [Требования ко внешним интерфейсам](#ТРЕБОВАНИЯ-КО-ВНЕШНИМ-ИНТЕРФЕЙСАМ)
    * [Интерфейс пользователя](#ИНТЕРФЕЙС-ПОЛЬЗОВАТЕЛЯ)
  * [Функциональные требования](#ФУНКЦИОНАЛЬНЫЕ-ТРЕБОВАНИЯ)
  * [Описание вариантов взаимодействия](#ОПИСАНИЕ-ВАРИАНТОВ-ВЗАИМОДЕЙСТВИЯ)
  * [Системные требования](#СИСТЕМНЫЕ-ТРЕБОВАНИЯ)
  * [Перспективы развития](#ПЕРСПЕКТИВЫ-РАЗВИТИЯ)
  
## ВВЕДЕНИЕ
### НАЗНАЧЕНИЕ
Упрощение взаимодействия пользователей с сервисом Яндекс.Расписания и экономия интернет трафика путем использования Telegram бота.
### МАСШТАБ ПРОЕКТА
Данный проект является частью инфраструктуры Telegram Bots с использованием API сервиса Яндекс.Расписания.
### ЦЕЛЕВАЯ АУДИТОРИЯ
Целевая аудитория данного бота - активные пользователи Telegram.

## ОБЩЕЕ ОПИСАНИЕ
### ОПИСАНИЕ
Данная программа представляет собой Python скрипт, непрерывно взаимодействующий с Telegram Bot API и API Яндекс.Расписаний. Приложение не требует пользовательских данных, поэтому необходимость в использовании базы данных отпадает, что значительно облегчает развертывание и поддержание работы скрипта.
### ОБЩАЯ ФУНКЦИОНАЛЬНОСТЬ
#### С ТОЧКИ ЗРЕНИЯ РАЗРАБОТЧИКОВ
* Создать Telegram бота на основе Telegram Bot API, использую Python модуль [pyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI);
* Создать Python модуль для работы с API сервиса Яндекс.Расписания;
* Написать регулярные выражения для парсинга пользовательских сообщение по шаблонам.
#### С ТОЧКИ ЗРЕНИЯ ОРГАНИЗАЦИИ TELEGRAM
* Новые боты способствуют развитию как Telegram Bot API, так и всему сервису Telegram.
#### С ТОЧКИ ЗРЕНИЯ ОРГАНИЗАЦИИ ЯНДЕКС
* Приход сервисов Яндекса на новые платформы;
* Развитие API и его комьюнити.
#### С ТОЧКИ ЗРЕНИЯ КЛИЕНТА
* Локализация различных полезных сервисов в одном месте - Telegram;
* Экономия трафика - нет необходимости в загрузке целый сайтов.
### ФУНКЦИИ ПРОДУКТА
* Поиск и получение расписания рейсов между станциями;
* Получение расписания рейсов по станции;
* Получения списка ближайших станций.
### ХАРАКТЕРИСТИКИ ПОЛЬЗОВАТЕЛЯ
Уверенный грамотный пользователь Telegram.
### ОГРАНИЧЕНИЯ
Интерфейс бота реализован только на русском языке.

## ДЕТАЛЬНЫЕ ТРЕБОВАНИЯ
### ТРЕБОВАНИЯ КО ВНЕШНИМ ИНТЕРФЕЙСАМ
#### ИНТЕРФЕЙС ПОЛЬЗОВАТЕЛЯ
Интерфейс пользователя предоставляет сервис Telegram - окно диалога с полем для ввода текста и историей сообщений.
### ФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ
> Со всеми терминами можно ознакомиться на сайте [документации API Яндекс.Расписаний](https://tech.yandex.ru/rasp/doc/concepts/termin-docpage/) и [документации Telegram Bot API](https://core.telegram.org/bots/api).

Бот должен уметь:
* Определять сообщение пользователя для поиска рейсов между станциями по шаблону:  
`<НАЧАЛЬНАЯ> -- <КОНЕЧНАЯ> [<ДАТА>] [<ТИП_ТРАНСПОРТА>]`,  
где значение в квадратных скобках является необязательным;
* Предоставлять расписание рейсов между станциями в виде:  
`<ЭМОДЗИ (ТИП_ТРАСПОРНТА)> <РЕЙС> <ДАТА-ВРЕМЯ_ОТПРАВЛЕНИЯ> (<МЕСТО_ОТПРАВЛЕНИЯ>) - <ДАТА-ВРЕМЯ_ПРИБЫТИЯ> (<МЕСТО_ПРИБЫТИЯ>) <ВРЕМЯ_В_ПУТИ>`
* Определять сообщение пользователя для поиска расписания рейсов по станции по шаблону:  
`<СТАНЦИЯ> [<ДАТА>] [<ТИП_ТРАНСПОРТА>] [ПРИБЫТИЕ/ОТПРАВЛЕНИЕ]`,  
где значение в квадратных скобках является необязательным;
* Предоставлять расписание рейсов по станции по шаблону:  
`<ЭМОДЗИ (ТИП_ТРАСПОРНТА)> <РЕЙС> <ДАТА-ВРЕМЯ_ОТПРАВЛЕНИЯ> <НАЗВАНИЕ_НИТКИ>`, если запрошено отправление,  
`<ЭМОДЗИ (ТИП_ТРАСПОРНТА)> <РЕЙС> <НАЗВАНИЕ_НИТКИ> <ДАТА-ВРЕМЯ_ПРИБЫТИЯ>`, если запрошено прибытие;
* Определять сообщение пользователя с геолокацией;
* Предоставлять список ближайших от геолокации пользователя станций по шаблону:  
`<ЭМОДЗИ (ТИП_ТРАСПОРНТА)> <НАЗВАНИЕ_СТАНЦИИ>, <ТИП_СТАНЦИИ>`
### ОПИСАНИЕ ВАРИАНТОВ ВЗАИМОДЕЙСТВИЯ
1. Пользователь отправляет сообщение по одному из шаблонов, бот определят шаблон и отвечает пользователю одним или несколькими сообщениями с необходимыми расписаниями;
2. Пользователь отправляет геометку, бот отвечает сообщением со списком ближайших остановок.
### СИСТЕМНЫЕ ТРЕБОВАНИЯ
* ОС Windows, Linux, MacOS X
* Процессор Pentium 4 1.2Gz
* RAM 512 mb
* Место на жёстком диске: Не менее 50 Gb
* Интерпритатор Python
### ПЕРСПЕКТИВЫ РАЗВИТИЯ
* Дополнение функционала бота inline клавиатурами и call_back ответами;
* Подключение всех функция API Яндекс.Расписаний.
